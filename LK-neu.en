>load "LK.e";
>{Mt,clb,tk,rlb}=readtable("ABC.dat",>clabs,>rlabs);
>writetable(Mt[[1:5],[1:6]],wc=8,labc=clb[1:6],labr=rlb);
              ST      SK      BS      AS      PR      LR
003_Fest    3766    2490    2335    3707    2684    1325
006_Fest    4487    4033    4508    3528    3652    2189
  X_10.0    5316    2328    4110    4443    2364       0
  X_10.1    4047       0    3952    5536    5031     351
Nuno_054     362     388     701     648     575     360
>s=1; Df:=Mt[s], At:=[0,2751,3001,500,0,3567]
[3766,  2490,  2335,  3707,  2684,  1325,  52,  50,  50,  0,  110,  0]
[0,  2751,  3001,  500,  0,  3567]
>rD:=1.2*Mt[1:4].(Def_DSpez)+8000; ...
>writetable(rD/sum(rD),labr=rlb,labc=lKL)
                   I         A         K
  003_Fest      0.38      0.31      0.32
  006_Fest      0.37       0.3      0.33
    X_10.0      0.39      0.29      0.32
    X_10.1      0.38      0.34      0.28
>rD:=rD_Mt[s].(Def_DSpez)+1000;
>rDg:=rD/sum(rD)*[1,1,2]
     0.375078      0.305963      0.637918 
     0.367555      0.304257      0.656378 
     0.391475      0.286961      0.643129 
     0.384994      0.335036      0.559939 
     0.375254      0.305848      0.637797 
>x=A\rD'; t:=x'/sum(x');
>writetable(round(x',0)|t,labc=clb[[2,3,6,2,3,6]],labr=rlb,wc=8)
              SK      BS      LR      SK      BS      LR
003_Fest   14945   13992    7298    0.41    0.39     0.2
006_Fest   19847   15973    8986    0.44    0.36     0.2
  X_10.0   18747   17234    6756    0.44     0.4    0.16
  X_10.1   11905   21895   11740    0.26    0.48    0.26
Nuno_054   12403   11626    6049    0.41    0.39     0.2
>c=rDg[s], b=rD[s]';
[0.375078,  0.305963,  0.637918]
>startlpsolve; {x2,obj,duals}:=ilpsolve(A,b,c,<max,eq=1); x2'
[14945,  13993,  7298]
>c=(rD[s]'/(A.x2))'
[0.999974,  0.999968,  0.999992]
>X=floor(x)'.U2; rlb[s]
003_Fest
>bat(X[s],rD[s])
                           I             A             K           sum
             x         14945         13992          7297         36234
          loss         14945         13992          7297         36234
            rA   1.8288e+006  1.49177e+006  1.55516e+006  4.87572e+006
            rD  1.82885e+006  1.49185e+006  1.55522e+006  4.87592e+006
         rA-rD         -54.6         -83.4           -62          -200
       Schaden             1             1             1             3
       Verlust             1             1             1             3
[1.00003,  1.00006,  1.00004]
>bat(x2'.U2,rD[s])
                           I             A             K           sum
             x         14945         13993          7298         36236
          loss         14945         13993          7298         36236
            rA   1.8289e+006   1.4919e+006  1.55523e+006  4.87603e+006
            rD  1.82885e+006  1.49185e+006  1.55522e+006  4.87592e+006
         rA-rD          47.4          47.6            12           107
       Schaden             1             1             1             3
       Verlust             1             1             1             3
[0.999974,  0.999968,  0.999992]
>bat(At,rD[s])
                           I             A             K           sum
             x          2751          3001          3567          9319
          loss          2751          3001          3567          9319
            rA        456271        534851        436045  1.42717e+006
            rD  1.82885e+006  1.49185e+006  1.55522e+006  4.87592e+006
         rA-rD -1.37258e+006       -956999 -1.11918e+006 -3.44876e+006
       Schaden          0.25          0.36          0.28          0.89
       Verlust          4.01          2.79          3.57         10.36
[4.00826,  2.78928,  3.56665]
% * Varianten
>fight2(floor(X[s]),Mt[s][1:6]);
     Rnd      ST      SK      BS      AS      PR      LR     Sum
       0       0   14945   13992       0       0    7297   36234
       1       0    7539    7043       0       0    3672   18254
       2       0    3815    3552       0       0    1853    9220
       3       0    1933    1790       0       0     936    4659
       4       0     973     895       0       0     469    2337
       5       0     486     447       0       0     234    1167
       6       0     243     223       0       0     117     583
       7       0     121     111       0       0      58     290

     Rnd      ST      SK      BS      AS      PR      LR     Sum
       0    3766    2490    2335    3707    2684    1325   16307
       1    1883    1245    1167    1853    1342     662    8152
       2     941     622     583     926     671     331    4074
       3     470     311     291     463     335     165    2035
       4     235     155     145     231     167      82    1015
       5     120      79      75     119      85      42     520
       6      66      43      42      67      47      23     288
       7      41      27      27      43      30      14     182
>fight2(x2'.U2,Mt[s][1:6]);
     Rnd      ST      SK      BS      AS      PR      LR     Sum
       0       0   14945   13993       0       0    7298   36236
       1       0    7539    7045       0       0    3673   18257
       2       0    3815    3554       0       0    1854    9223
       3       0    1934    1792       0       0     936    4662
       4       0     974     896       0       0     469    2339
       5       0     487     448       0       0     234    1169
       6       0     243     224       0       0     117     584
       7       0     121     112       0       0      58     291

     Rnd      ST      SK      BS      AS      PR      LR     Sum
       0    3766    2490    2335    3707    2684    1325   16307
       1    1883    1245    1167    1853    1342     662    8152
       2     941     622     583     926     671     331    4074
       3     470     311     291     463     335     165    2035
       4     235     155     145     231     167      82    1015
       5     119      79      75     119      85      42     519
       6      65      43      42      67      47      23     287
       7      41      27      27      43      30      14     182
>fight2(At,Mt[s][1:6]);
     Rnd      ST      SK      BS      AS      PR      LR     Sum
       0       0    2751    3001     500       0    3567    9819
       1       0    1375    1500     250       0    1783    4908
       2       0     687     750     125       0     891    2453
       3       0     343     375      62       0     445    1225
       4       0     171     187      31       0     222     611
       5       0      85      93      15       0     111     304
       6       0      42      46       7       0      55     150

     Rnd      ST      SK      BS      AS      PR      LR     Sum
       0    3766    2490    2335    3707    2684    1325   16307
       1    3291    2176    1913    3037    2305    1137   13859
       2    3044    2012    1708    2712    2115    1043   12634
       3    2918    1928    1607    2552    2020     996   12021
       4    2854    1885    1557    2473    1972     972   11713
       5    2822    1863    1532    2433    1948     960   11558
       6    2806    1852    1519    2413    1936     954   11480
>Silber(7500,[1,35,42])
                     Stadt      Festung         Burg        Total
          Anz            1           35           42            0
Kapaz/Habitat         1450          200           20            0
 Fassvermögen         1450         7000          840         9290
  Fassung [%]         15.6         75.3            9          100
       Silber         6050         1210          242         7500
    Ideal [%]         15.6         67.7         78.1         80.7
        Stadt        226.3         31.2          3.1       1170.6
      Festung        981.8        135.4         13.5        161.5
         Burg       1132.8        156.3         15.6         16.1
[0.156082,  0.677072,  0.78127,  0.80732]
>Silber=7500; Kapaz=[1450,200,20]; Anz=[1,35,42];
>hilf=[25,5,1];
>Anz|Anz.hilf', SpVerm=Kapaz*Anz; SpVerm|sum(SpVerm), %/sum(SpVerm)
[1,  35,  42,  242]
[1450,  7000,  840,  9290]
[0.156082,  0.753498,  0.0904198,  1]
>Bedarf=(Anz.hilf'*hilf)
[6050,  1210,  242]
>1450*(1210*2+5)/sum(SpVerm)
378.498385361
>
